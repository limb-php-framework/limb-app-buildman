<core:set title="More on Wrapping">
<core:wrap file="4/layout.html" as="content">

<p>
  The component tree generated by the use of core:wrap is exactly the same as if you had manually
  written the wrapper html into one big file.
<br />Some of the virtues of this are
  <ul>
    <li> there is no (programatical) limit on placing wrappers inside other wrappers </li>
    <li> data binding expressions will work as expected </li>
    <li> components that check nesting level will work as expected </li>
  </ul>
</p>

<p>
  The contents of the file where this paragraph is stored is wrapped by 'layout.html'.
  Additionally, each example that follows is wrapped by 'example.html'.
</p>

<p>
  <strong>Hint:</strong> because the parser requires that html tags be balanced within each wact
  tag, the contents of wrapper files must balance.
</p>

<core:wrap file="4/example.html" in="content">
  <p>
    This example shows how you can identify, at runtime, components inside wrappers.
    The following two bits of content are wrapped by the same wrapper file 'box.html'.
    To manipulate the components inside the wrapper, you must get them using server id of an
    enclosing component.  In this case it is natural to give the core:wrap tag a server id and use that.
  </p>

  <p>
    Here's the first:
    <core:wrap wact:id="wrap1" file="4/box.html" in="content">
      Wrapped by the core:wrap tag with wact:id="wrap1", it should be set red at runtime
    </core:wrap>

    And the second:
    <core:wrap wact:id="wrap2" file="4/box.html" in="content">
      wrapped by the core:wrap tag with wact:id="wrap2", it should be set blue at runtime
    </core:wrap>
  </p>
</core:wrap>

<core:wrap file="4/example.html" in="content">
  <p>
    This is an example of nested wrapping using the same file.  Again, using the wact:id
    of the relevant component can be used to manipulate components at runtime.
  </p>
  <core:wrap wact:id="outer" file="4/box.html" in="content">
    This is in the outer wrapper.  The border should be set thicker at runtime.
    <core:wrap wact:id="inner" file="4/box.html" in="content">
      This is in the inner wrapper.  The border should be set thinner at runtime.
    </core:wrap>
  </core:wrap>
</core:wrap>

<core:wrap file="4/example.html" in="content">
  <p>
    This is an example of wrapping an input by a (quite idiosyncratic) wrapper file that contains a form.  It is also an example of how one wrapper
    may contain many insertion points, of which you choose one when wrapping some content.  In this case the insertion point
    is the the component with server id = "top".
  </p>
  <core:wrap file="4/form.html" in="top">
    <label><strong>Wrapped input:</strong> <input name="special" type="text" size="10" /></label>
  </core:wrap>
</core:wrap>

</core:wrap>
